<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Error Handling & Retry Patterns in flashQ: Complete Guide - flashQ Blog</title>
  <meta name="description" content="Master error handling in flashQ job queues. Learn retry strategies, exponential backoff, dead letter queues, circuit breakers, and graceful degradation patterns.">
  <meta name="keywords" content="flashq error handling, job queue retry, exponential backoff, dead letter queue, dlq, circuit breaker, retry patterns, job queue resilience">
  <meta name="robots" content="index, follow">

  <meta property="og:title" content="Error Handling & Retry Patterns in flashQ: Complete Guide">
  <meta property="og:description" content="Master error handling with retry strategies, exponential backoff, DLQ, and circuit breakers.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://flashq.dev/blog/error-handling-retry-patterns.html">
  <meta property="og:image" content="https://flashq.dev/og-image.png">
  <meta property="article:published_time" content="2026-01-19">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Error Handling & Retry Patterns in flashQ">
  <meta name="twitter:description" content="Retry strategies, exponential backoff, DLQ, and circuit breakers.">
  <meta name="twitter:image" content="https://flashq.dev/og-image.png">

  <link rel="canonical" href="https://flashq.dev/blog/error-handling-retry-patterns.html">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš¡</text></svg>">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Error Handling & Retry Patterns in flashQ: Complete Guide",
    "description": "Comprehensive guide to error handling patterns in flashQ including retry strategies, exponential backoff, and dead letter queues.",
    "datePublished": "2026-01-19",
    "author": { "@type": "Organization", "name": "flashQ" },
    "publisher": { "@type": "Organization", "name": "flashQ", "url": "https://flashq.dev" }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://flashq.dev" },
      { "@type": "ListItem", "position": 2, "name": "Blog", "item": "https://flashq.dev/blog/" },
      { "@type": "ListItem", "position": 3, "name": "Error Handling & Retry Patterns", "item": "https://flashq.dev/blog/error-handling-retry-patterns.html" }
    ]
  }
  </script>
</head>
<body>
  <nav>
    <div class="container wide">
      <a href="../" class="logo"><span>âš¡</span> flashQ</a>
      <div class="nav-links">
        <a href="../#features">Features</a>
        <a href="../blog/" class="active">Blog</a>
        <a href="../docs/">Docs</a>
        <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
        <a href="../docs/#quickstart" class="btn btn-primary">Get Started</a>
      </div>
      <button class="mobile-menu-btn" aria-label="Menu"><span></span><span></span><span></span></button>
    </div>
  </nav>

  <div class="mobile-menu">
    <a href="../#features">Features</a>
    <a href="../blog/">Blog</a>
    <a href="../docs/">Docs</a>
    <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
    <a href="../docs/#quickstart" class="btn btn-primary">Get Started</a>
  </div>

  <header class="article-header">
    <div class="container">
      <span class="article-tag">Best Practices</span>
      <h1>Error Handling & Retry Patterns in flashQ</h1>
      <div class="article-meta">
        <span>ğŸ“… January 19, 2026</span>
        <span>â±ï¸ 15 min read</span>
      </div>
    </div>
  </header>

  <article class="article-content">
    <div class="container">
      <p>Build resilient job queues that gracefully handle failures. This guide covers retry strategies, exponential backoff, dead letter queues, circuit breakers, and more.</p>

      <h2>Understanding Error Types</h2>

      <p>Not all errors are equal. Understanding error types helps you choose the right handling strategy:</p>

      <table>
        <thead>
          <tr>
            <th>Error Type</th>
            <th>Examples</th>
            <th>Strategy</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Transient</strong></td>
            <td>Network timeout, 503 Service Unavailable, rate limit</td>
            <td>Retry with backoff</td>
          </tr>
          <tr>
            <td><strong>Permanent</strong></td>
            <td>400 Bad Request, invalid data, missing resource</td>
            <td>Don't retry, send to DLQ</td>
          </tr>
          <tr>
            <td><strong>Recoverable</strong></td>
            <td>Database connection lost, external service down</td>
            <td>Retry with circuit breaker</td>
          </tr>
          <tr>
            <td><strong>Bug</strong></td>
            <td>TypeError, null reference, logic errors</td>
            <td>Log, alert, fix code</td>
          </tr>
        </tbody>
      </table>

      <h2>Retry Strategies</h2>

      <h3>Basic Retry Configuration</h3>

      <pre><code><span class="keyword">import</span> { FlashQ } <span class="keyword">from</span> <span class="string">'flashq'</span>;

<span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({ host: <span class="string">'localhost'</span>, port: <span class="number">6789</span> });

<span class="comment">// Configure retries when pushing a job</span>
<span class="keyword">await</span> client.<span class="function">push</span>(<span class="string">'process-order'</span>, orderData, {
  max_attempts: <span class="number">5</span>,    <span class="comment">// Maximum retry attempts</span>
  backoff: <span class="number">1000</span>,      <span class="comment">// Initial backoff delay (ms)</span>
  timeout: <span class="number">30000</span>      <span class="comment">// Processing timeout per attempt</span>
});</code></pre>

      <h3>Retry Timeline Visualization</h3>

      <pre><code>Attempt 1: Immediate
    â†“ (fail)
    â””â”€â”€ Wait 1s (backoff)

Attempt 2: After 1s
    â†“ (fail)
    â””â”€â”€ Wait 2s (backoff Ã— 2)

Attempt 3: After 3s total
    â†“ (fail)
    â””â”€â”€ Wait 4s (backoff Ã— 4)

Attempt 4: After 7s total
    â†“ (fail)
    â””â”€â”€ Wait 8s (backoff Ã— 8)

Attempt 5: After 15s total
    â†“ (fail)
    â””â”€â”€ Move to DLQ (max_attempts reached)</code></pre>

      <h3>Custom Retry Logic in Worker</h3>

      <pre><code><span class="keyword">import</span> { Worker } <span class="keyword">from</span> <span class="string">'flashq'</span>;

<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'process-order'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">try</span> {
    <span class="keyword">await</span> <span class="function">processOrder</span>(job.data);
  } <span class="keyword">catch</span> (error) {
    <span class="comment">// Check if we should retry</span>
    <span class="keyword">if</span> (<span class="function">isTransientError</span>(error) && job.attempts < <span class="number">5</span>) {
      <span class="keyword">throw</span> error; <span class="comment">// Throw to trigger automatic retry</span>
    }

    <span class="comment">// Permanent error - log and don't retry</span>
    <span class="keyword">if</span> (<span class="function">isPermanentError</span>(error)) {
      console.<span class="function">error</span>(<span class="string">`Permanent error for job </span>${job.id}<span class="string">:`</span>, error);
      <span class="keyword">return</span> { success: <span class="keyword">false</span>, error: error.message };
    }

    <span class="keyword">throw</span> error; <span class="comment">// Unknown error - retry</span>
  }
});

<span class="keyword">function</span> <span class="function">isTransientError</span>(error) {
  <span class="keyword">const</span> transientCodes = [<span class="number">408</span>, <span class="number">429</span>, <span class="number">500</span>, <span class="number">502</span>, <span class="number">503</span>, <span class="number">504</span>];
  <span class="keyword">return</span> error.message.<span class="function">includes</span>(<span class="string">'ECONNREFUSED'</span>) ||
         error.message.<span class="function">includes</span>(<span class="string">'ETIMEDOUT'</span>) ||
         transientCodes.<span class="function">some</span>(code => error.message.<span class="function">includes</span>(String(code)));
}

<span class="keyword">function</span> <span class="function">isPermanentError</span>(error) {
  <span class="keyword">const</span> permanentCodes = [<span class="number">400</span>, <span class="number">401</span>, <span class="number">403</span>, <span class="number">404</span>, <span class="number">422</span>];
  <span class="keyword">return</span> permanentCodes.<span class="function">some</span>(code => error.message.<span class="function">includes</span>(String(code)));
}</code></pre>

      <h2>Exponential Backoff</h2>

      <p>flashQ implements exponential backoff automatically. The delay between retries doubles each time:</p>

      <pre><code><span class="comment">// Backoff formula: delay = backoff * (2 ^ (attempt - 1))</span>

<span class="keyword">await</span> client.<span class="function">push</span>(<span class="string">'api-call'</span>, data, {
  max_attempts: <span class="number">6</span>,
  backoff: <span class="number">1000</span>  <span class="comment">// 1 second base</span>
});

<span class="comment">// Retry delays:</span>
<span class="comment">// Attempt 1 â†’ 2: 1s</span>
<span class="comment">// Attempt 2 â†’ 3: 2s</span>
<span class="comment">// Attempt 3 â†’ 4: 4s</span>
<span class="comment">// Attempt 4 â†’ 5: 8s</span>
<span class="comment">// Attempt 5 â†’ 6: 16s</span>
<span class="comment">// Total wait time: 31 seconds</span></code></pre>

      <h3>Backoff with Jitter</h3>

      <p>For high-concurrency scenarios, add jitter to prevent thundering herd:</p>

      <pre><code><span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'high-concurrency'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">try</span> {
    <span class="keyword">await</span> <span class="function">processJob</span>(job.data);
  } <span class="keyword">catch</span> (error) {
    <span class="keyword">if</span> (<span class="function">isTransientError</span>(error)) {
      <span class="comment">// Add random jitter before throwing</span>
      <span class="keyword">const</span> jitter = Math.<span class="function">random</span>() * <span class="number">1000</span>; <span class="comment">// 0-1s random delay</span>
      <span class="keyword">await</span> <span class="function">sleep</span>(jitter);
      <span class="keyword">throw</span> error;
    }
    <span class="keyword">throw</span> error;
  }
});

<span class="keyword">function</span> <span class="function">sleep</span>(ms) {
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="function">Promise</span>(resolve => <span class="function">setTimeout</span>(resolve, ms));
}</code></pre>

      <h2>Dead Letter Queue (DLQ)</h2>

      <p>Jobs that fail all retries are moved to the Dead Letter Queue for later analysis or manual intervention.</p>

      <h3>Viewing DLQ Jobs</h3>

      <pre><code><span class="comment">// Get jobs from DLQ</span>
<span class="keyword">const</span> dlqJobs = <span class="keyword">await</span> client.<span class="function">getDlq</span>(<span class="string">'process-order'</span>, <span class="number">100</span>);

console.<span class="function">log</span>(<span class="string">`</span>${dlqJobs.length}<span class="string"> jobs in DLQ`</span>);

dlqJobs.<span class="function">forEach</span>(job => {
  console.<span class="function">log</span>({
    id: job.id,
    attempts: job.attempts,
    error: job.error,
    data: job.data,
    failedAt: job.failedAt
  });
});</code></pre>

      <h3>Retrying DLQ Jobs</h3>

      <pre><code><span class="comment">// Retry all jobs in DLQ</span>
<span class="keyword">const</span> retried = <span class="keyword">await</span> client.<span class="function">retryDlq</span>(<span class="string">'process-order'</span>);
console.<span class="function">log</span>(<span class="string">`Retried </span>${retried}<span class="string"> jobs`</span>);

<span class="comment">// Retry specific job</span>
<span class="keyword">await</span> client.<span class="function">retryDlq</span>(<span class="string">'process-order'</span>, jobId);

<span class="comment">// Selective retry based on error type</span>
<span class="keyword">const</span> dlqJobs = <span class="keyword">await</span> client.<span class="function">getDlq</span>(<span class="string">'my-queue'</span>, <span class="number">100</span>);

<span class="keyword">for</span> (<span class="keyword">const</span> job <span class="keyword">of</span> dlqJobs) {
  <span class="comment">// Only retry rate limit errors (now that limit is lifted)</span>
  <span class="keyword">if</span> (job.error?.<span class="function">includes</span>(<span class="string">'429'</span>) || job.error?.<span class="function">includes</span>(<span class="string">'rate limit'</span>)) {
    <span class="keyword">await</span> client.<span class="function">retryDlq</span>(<span class="string">'my-queue'</span>, job.id);
  }
}</code></pre>

      <h3>DLQ Webhooks</h3>

      <pre><code><span class="comment">// Get notified when jobs hit DLQ</span>
<span class="keyword">await</span> client.<span class="function">push</span>(<span class="string">'critical-task'</span>, data, {
  max_attempts: <span class="number">3</span>,
  webhook: {
    url: <span class="string">'https://your-api.com/dlq-alert'</span>,
    events: [<span class="string">'failed'</span>],  <span class="comment">// Trigger on final failure</span>
    secret: process.env.WEBHOOK_SECRET
  }
});

<span class="comment">// Webhook handler</span>
app.<span class="function">post</span>(<span class="string">'/dlq-alert'</span>, (req, res) => {
  <span class="keyword">const</span> { jobId, queue, error, attempts } = req.body;

  <span class="comment">// Send alert to Slack</span>
  slack.<span class="function">send</span>({
    channel: <span class="string">'#alerts'</span>,
    text: <span class="string">`Job </span>${jobId}<span class="string"> failed after </span>${attempts}<span class="string"> attempts: </span>${error}<span class="string">`</span>
  });

  res.<span class="function">status</span>(<span class="number">200</span>).<span class="function">send</span>(<span class="string">'OK'</span>);
});</code></pre>

      <h2>Circuit Breaker Pattern</h2>

      <p>Prevent cascading failures when external services are down:</p>

      <pre><code><span class="keyword">import</span> CircuitBreaker <span class="keyword">from</span> <span class="string">'opossum'</span>;
<span class="keyword">import</span> { Worker } <span class="keyword">from</span> <span class="string">'flashq'</span>;

<span class="comment">// Create circuit breaker for external API</span>
<span class="keyword">const</span> apiBreaker = <span class="keyword">new</span> <span class="function">CircuitBreaker</span>(callExternalAPI, {
  timeout: <span class="number">10000</span>,              <span class="comment">// 10s timeout</span>
  errorThresholdPercentage: <span class="number">50</span>, <span class="comment">// Open after 50% failures</span>
  resetTimeout: <span class="number">30000</span>,          <span class="comment">// Try again after 30s</span>
  volumeThreshold: <span class="number">10</span>           <span class="comment">// Minimum 10 requests before tripping</span>
});

<span class="comment">// Event handlers for monitoring</span>
apiBreaker.<span class="function">on</span>(<span class="string">'open'</span>, () => {
  console.<span class="function">warn</span>(<span class="string">'Circuit breaker OPENED - external API is down'</span>);
  <span class="function">alertOps</span>(<span class="string">'External API circuit breaker opened'</span>);
});

apiBreaker.<span class="function">on</span>(<span class="string">'close'</span>, () => {
  console.<span class="function">info</span>(<span class="string">'Circuit breaker CLOSED - API recovered'</span>);
});

<span class="comment">// Worker with circuit breaker</span>
<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'external-api'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">try</span> {
    <span class="keyword">return</span> <span class="keyword">await</span> apiBreaker.<span class="function">fire</span>(job.data);
  } <span class="keyword">catch</span> (error) {
    <span class="keyword">if</span> (apiBreaker.opened) {
      <span class="comment">// Circuit is open - fail fast, retry later</span>
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">'Circuit breaker open: service unavailable'</span>);
    }
    <span class="keyword">throw</span> error;
  }
});</code></pre>

      <h3>Circuit Breaker States</h3>

      <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Failures exceed threshold    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLOSED  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  OPEN   â”‚
â”‚(normal) â”‚                                 â”‚ (fail   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                 â”‚  fast)  â”‚
     â”‚                                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                           â”‚
     â”‚ Success                      Reset timeout expires
     â”‚                                           â”‚
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  HALF-OPEN  â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚   (test)    â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

      <h2>Graceful Degradation</h2>

      <p>Return partial results when some operations fail:</p>

      <pre><code><span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'enrich-data'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">const</span> results = {
    primary: <span class="keyword">null</span>,
    enrichments: {}
  };

  <span class="comment">// Primary operation - must succeed</span>
  results.primary = <span class="keyword">await</span> <span class="function">fetchPrimaryData</span>(job.data.id);

  <span class="comment">// Optional enrichments - fail gracefully</span>
  <span class="keyword">const</span> enrichmentTasks = [
    { name: <span class="string">'social'</span>, fn: <span class="function">fetchSocialData</span> },
    { name: <span class="string">'analytics'</span>, fn: <span class="function">fetchAnalytics</span> },
    { name: <span class="string">'recommendations'</span>, fn: <span class="function">fetchRecommendations</span> }
  ];

  <span class="keyword">await</span> Promise.<span class="function">all</span>(
    enrichmentTasks.<span class="function">map</span>(<span class="keyword">async</span> (task) => {
      <span class="keyword">try</span> {
        results.enrichments[task.name] = <span class="keyword">await</span> task.<span class="function">fn</span>(job.data.id);
      } <span class="keyword">catch</span> (error) {
        console.<span class="function">warn</span>(<span class="string">`Enrichment </span>${task.name}<span class="string"> failed:`</span>, error.message);
        results.enrichments[task.name] = <span class="keyword">null</span>; <span class="comment">// Graceful degradation</span>
      }
    })
  );

  <span class="keyword">return</span> results;
});</code></pre>

      <h2>Complete Error Handling Pattern</h2>

      <pre><code><span class="keyword">import</span> { FlashQ, Worker } <span class="keyword">from</span> <span class="string">'flashq'</span>;
<span class="keyword">import</span> CircuitBreaker <span class="keyword">from</span> <span class="string">'opossum'</span>;

<span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({ host: <span class="string">'localhost'</span>, port: <span class="number">6789</span> });

<span class="comment">// Circuit breaker for external service</span>
<span class="keyword">const</span> breaker = <span class="keyword">new</span> <span class="function">CircuitBreaker</span>(callAPI, {
  timeout: <span class="number">10000</span>,
  errorThresholdPercentage: <span class="number">50</span>,
  resetTimeout: <span class="number">30000</span>
});

<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'resilient-queue'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">try</span> {
    <span class="comment">// 1. Validate input</span>
    <span class="keyword">if</span> (!job.data.userId) {
      <span class="keyword">await</span> client.<span class="function">discard</span>(job.id);
      <span class="keyword">return</span> { error: <span class="string">'Invalid data'</span> };
    }

    <span class="comment">// 2. Process with circuit breaker</span>
    <span class="keyword">const</span> result = <span class="keyword">await</span> breaker.<span class="function">fire</span>(job.data);

    <span class="comment">// 3. Report progress for long jobs</span>
    <span class="keyword">await</span> client.<span class="function">progress</span>(job.id, <span class="number">100</span>, <span class="string">'Complete'</span>);

    <span class="keyword">return</span> result;

  } <span class="keyword">catch</span> (error) {
    <span class="comment">// 4. Classify error</span>
    <span class="keyword">if</span> (<span class="function">isPermanentError</span>(error)) {
      <span class="keyword">await</span> client.<span class="function">discard</span>(job.id);
      <span class="keyword">return</span> { error: error.message };
    }

    <span class="keyword">if</span> (breaker.opened) {
      console.<span class="function">log</span>(<span class="string">'Circuit open, will retry later'</span>);
    }

    <span class="keyword">throw</span> error; <span class="comment">// Retry for transient errors</span>
  }
}, { concurrency: <span class="number">10</span> });</code></pre>

      <div class="callout callout-success">
        <strong>Key Takeaways:</strong> Classify errors, use exponential backoff, implement circuit breakers, and always have a DLQ strategy for failed jobs.
      </div>

      <h2>Related Resources</h2>
      <ul>
        <li><a href="production-checklist.html">Production Checklist</a></li>
        <li><a href="debugging-queue-problems.html">Debugging Queue Problems</a></li>
        <li><a href="monitoring-ai-pipelines.html">Monitoring AI Pipelines</a></li>
      </ul>

      <div class="article-cta">
        <h3>Build Resilient Queues</h3>
        <p>Get started with flashQ and implement robust error handling.</p>
        <a href="../docs/#quickstart" class="btn btn-primary">Get Started â†’</a>
      </div>
    </div>
  </article>

  <footer>
    <div class="container">
      <a href="../" class="logo"><span>âš¡</span> flashQ</a>
      <div class="footer-links">
        <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
        <a href="https://npmjs.com/package/flashq" target="_blank">npm</a>
        <a href="../docs/">Docs</a>
        <a href="../blog/">Blog</a>
      </div>
      <div class="footer-copy">Â© 2026 flashQ. MIT License.</div>
    </div>
  </footer>

  <script src="../script.js"></script>
</body>
</html>
