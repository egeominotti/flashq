<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Error Handling & Retry Patterns in flashQ: Complete Guide - flashQ Blog</title>
  <meta name="description" content="Master error handling in flashQ job queues. Learn retry strategies, exponential backoff, dead letter queues, circuit breakers, and graceful degradation patterns.">
  <meta name="keywords" content="flashq error handling, job queue retry, exponential backoff, dead letter queue, dlq, circuit breaker, retry patterns, job queue resilience">
  <meta name="robots" content="index, follow">

  <meta property="og:title" content="Error Handling & Retry Patterns in flashQ: Complete Guide">
  <meta property="og:description" content="Master error handling with retry strategies, exponential backoff, DLQ, and circuit breakers.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://flashq.dev/blog/error-handling-retry-patterns.html">
  <meta property="og:image" content="https://flashq.dev/og-image.png">
  <meta property="article:published_time" content="2026-01-19">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Error Handling & Retry Patterns in flashQ">
  <meta name="twitter:description" content="Retry strategies, exponential backoff, DLQ, and circuit breakers.">
  <meta name="twitter:image" content="https://flashq.dev/og-image.png">

  <link rel="canonical" href="https://flashq.dev/blog/error-handling-retry-patterns.html">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš¡</text></svg>">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Error Handling & Retry Patterns in flashQ: Complete Guide",
    "description": "Comprehensive guide to error handling patterns in flashQ including retry strategies, exponential backoff, and dead letter queues.",
    "datePublished": "2026-01-19",
    "author": { "@type": "Organization", "name": "flashQ" },
    "publisher": { "@type": "Organization", "name": "flashQ", "url": "https://flashq.dev" }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://flashq.dev" },
      { "@type": "ListItem", "position": 2, "name": "Blog", "item": "https://flashq.dev/blog/" },
      { "@type": "ListItem", "position": 3, "name": "Error Handling & Retry Patterns", "item": "https://flashq.dev/blog/error-handling-retry-patterns.html" }
    ]
  }
  </script>
  <!-- Highlight.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/yaml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
</head>
<body>
  <nav>
    <div class="container wide">
      <a href="../" class="logo"><span>âš¡</span> flashQ</a>
      <div class="nav-links">
        <a href="../#features">Features</a>
        <a href="../blog/" class="active">Blog</a>
        <a href="../docs/">Docs</a>
        <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
        <a href="../docs/#quickstart" class="btn btn-primary">Get Started</a>
      </div>
      <button class="mobile-menu-btn" aria-label="Menu"><span></span><span></span><span></span></button>
    </div>
  </nav>

  <div class="mobile-menu">
    <a href="../#features">Features</a>
    <a href="../blog/">Blog</a>
    <a href="../docs/">Docs</a>
    <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
    <a href="../docs/#quickstart" class="btn btn-primary">Get Started</a>
  </div>

  <header class="article-header header-tutorial">
    <div class="container">
      <span class="article-tag">Best Practices</span>
      <h1>Error Handling & Retry Patterns in flashQ</h1>
      <div class="article-meta">
        <span>ğŸ“… January 19, 2026</span>
        <span>â±ï¸ 15 min read</span>
      </div>
    </div>
  </header>

  <article class="article-content">
    <div class="container">
      <p>Build resilient job queues that gracefully handle failures. This guide covers retry strategies, exponential backoff, dead letter queues, circuit breakers, and more.</p>

      <h2>Understanding Error Types</h2>

      <p>Not all errors are equal. Understanding error types helps you choose the right handling strategy:</p>

      <table>
        <thead>
          <tr>
            <th>Error Type</th>
            <th>Examples</th>
            <th>Strategy</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Transient</strong></td>
            <td>Network timeout, 503 Service Unavailable, rate limit</td>
            <td>Retry with backoff</td>
          </tr>
          <tr>
            <td><strong>Permanent</strong></td>
            <td>400 Bad Request, invalid data, missing resource</td>
            <td>Don't retry, send to DLQ</td>
          </tr>
          <tr>
            <td><strong>Recoverable</strong></td>
            <td>Database connection lost, external service down</td>
            <td>Retry with circuit breaker</td>
          </tr>
          <tr>
            <td><strong>Bug</strong></td>
            <td>TypeError, null reference, logic errors</td>
            <td>Log, alert, fix code</td>
          </tr>
        </tbody>
      </table>

      <h2>Retry Strategies</h2>

      <h3>Basic Retry Configuration</h3>

      <pre><code class="language-typescript">import { FlashQ } from 'flashq';

const client = new FlashQ({ host: 'localhost', port: 6789 });

// Configure retries when pushing a job
await client.push('process-order', orderData, {
  max_attempts: 5,    // Maximum retry attempts
  backoff: 1000,      // Initial backoff delay (ms)
  timeout: 30000      // Processing timeout per attempt
});</code></pre>

      <h3>Retry Timeline Visualization</h3>

      <pre><code class="language-typescript">Attempt 1: Immediate
    â†“ (fail)
    â””â”€â”€ Wait 1s (backoff)

Attempt 2: After 1s
    â†“ (fail)
    â””â”€â”€ Wait 2s (backoff Ã— 2)

Attempt 3: After 3s total
    â†“ (fail)
    â””â”€â”€ Wait 4s (backoff Ã— 4)

Attempt 4: After 7s total
    â†“ (fail)
    â””â”€â”€ Wait 8s (backoff Ã— 8)

Attempt 5: After 15s total
    â†“ (fail)
    â””â”€â”€ Move to DLQ (max_attempts reached)</code></pre>

      <h3>Custom Retry Logic in Worker</h3>

      <pre><code class="language-typescript">import { Worker } from 'flashq';

const worker = new Worker('process-order', async (job) => {
  try {
    await processOrder(job.data);
  } catch (error) {
    // Check if we should retry
    if (isTransientError(error) && job.attempts < 5) {
      throw error; // Throw to trigger automatic retry
    }

    // Permanent error - log and don't retry
    if (isPermanentError(error)) {
      console.error(`Permanent error for job ${job.id}:`, error);
      return { success: false, error: error.message };
    }

    throw error; // Unknown error - retry
  }
});

function isTransientError(error) {
  const transientCodes = [408, 429, 500, 502, 503, 504];
  return error.message.includes('ECONNREFUSED') ||
         error.message.includes('ETIMEDOUT') ||
         transientCodes.some(code => error.message.includes(String(code)));
}

function isPermanentError(error) {
  const permanentCodes = [400, 401, 403, 404, 422];
  return permanentCodes.some(code => error.message.includes(String(code)));
}</code></pre>

      <h2>Exponential Backoff</h2>

      <p>flashQ implements exponential backoff automatically. The delay between retries doubles each time:</p>

      <pre><code class="language-typescript">// Backoff formula: delay = backoff * (2 ^ (attempt - 1))

await client.push('api-call', data, {
  max_attempts: 6,
  backoff: 1000  // 1 second base
});

// Retry delays:
// Attempt 1 â†’ 2: 1s
// Attempt 2 â†’ 3: 2s
// Attempt 3 â†’ 4: 4s
// Attempt 4 â†’ 5: 8s
// Attempt 5 â†’ 6: 16s
// Total wait time: 31 seconds</code></pre>

      <h3>Backoff with Jitter</h3>

      <p>For high-concurrency scenarios, add jitter to prevent thundering herd:</p>

      <pre><code class="language-typescript">const worker = new Worker('high-concurrency', async (job) => {
  try {
    await processJob(job.data);
  } catch (error) {
    if (isTransientError(error)) {
      // Add random jitter before throwing
      const jitter = Math.random() * 1000; // 0-1s random delay
      await sleep(jitter);
      throw error;
    }
    throw error;
  }
});

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}</code></pre>

      <h2>Dead Letter Queue (DLQ)</h2>

      <p>Jobs that fail all retries are moved to the Dead Letter Queue for later analysis or manual intervention.</p>

      <h3>Viewing DLQ Jobs</h3>

      <pre><code class="language-typescript">// Get jobs from DLQ
const dlqJobs = await client.getDlq('process-order', 100);

console.log(`${dlqJobs.length} jobs in DLQ`);

dlqJobs.forEach(job => {
  console.log({
    id: job.id,
    attempts: job.attempts,
    error: job.error,
    data: job.data,
    failedAt: job.failedAt
  });
});</code></pre>

      <h3>Retrying DLQ Jobs</h3>

      <pre><code class="language-typescript">// Retry all jobs in DLQ
const retried = await client.retryDlq('process-order');
console.log(`Retried ${retried} jobs`);

// Retry specific job
await client.retryDlq('process-order', jobId);

// Selective retry based on error type
const dlqJobs = await client.getDlq('my-queue', 100);

for (const job of dlqJobs) {
  // Only retry rate limit errors (now that limit is lifted)
  if (job.error?.includes('429') || job.error?.includes('rate limit')) {
    await client.retryDlq('my-queue', job.id);
  }
}</code></pre>

      <h3>DLQ Webhooks</h3>

      <pre><code class="language-typescript">// Get notified when jobs hit DLQ
await client.push('critical-task', data, {
  max_attempts: 3,
  webhook: {
    url: 'https://your-api.com/dlq-alert',
    events: ['failed'],  // Trigger on final failure
    secret: process.env.WEBHOOK_SECRET
  }
});

// Webhook handler
app.post('/dlq-alert', (req, res) => {
  const { jobId, queue, error, attempts } = req.body;

  // Send alert to Slack
  slack.send({
    channel: '#alerts',
    text: `Job ${jobId} failed after ${attempts} attempts: ${error}`
  });

  res.status(200).send('OK');
});</code></pre>

      <h2>Circuit Breaker Pattern</h2>

      <p>Prevent cascading failures when external services are down:</p>

      <pre><code class="language-typescript">import CircuitBreaker from 'opossum';
import { Worker } from 'flashq';

// Create circuit breaker for external API
const apiBreaker = new CircuitBreaker(callExternalAPI, {
  timeout: 10000,              // 10s timeout
  errorThresholdPercentage: 50, // Open after 50% failures
  resetTimeout: 30000,          // Try again after 30s
  volumeThreshold: 10           // Minimum 10 requests before tripping
});

// Event handlers for monitoring
apiBreaker.on('open', () => {
  console.warn('Circuit breaker OPENED - external API is down');
  alertOps('External API circuit breaker opened');
});

apiBreaker.on('close', () => {
  console.info('Circuit breaker CLOSED - API recovered');
});

// Worker with circuit breaker
const worker = new Worker('external-api', async (job) => {
  try {
    return await apiBreaker.fire(job.data);
  } catch (error) {
    if (apiBreaker.opened) {
      // Circuit is open - fail fast, retry later
      throw new Error('Circuit breaker open: service unavailable');
    }
    throw error;
  }
});</code></pre>

      <h3>Circuit Breaker States</h3>

      <pre><code class="language-plaintext">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    Failures exceed threshold    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLOSED  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  OPEN   â”‚
â”‚(normal) â”‚                                 â”‚ (fail   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                 â”‚  fast)  â”‚
     â”‚                                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                                           â”‚
     â”‚ Success                      Reset timeout expires
     â”‚                                           â”‚
     â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  HALF-OPEN  â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚   (test)    â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

      <h2>Graceful Degradation</h2>

      <p>Return partial results when some operations fail:</p>

      <pre><code class="language-typescript">const worker = new Worker('enrich-data', async (job) => {
  const results = {
    primary: null,
    enrichments: {}
  };

  // Primary operation - must succeed
  results.primary = await fetchPrimaryData(job.data.id);

  // Optional enrichments - fail gracefully
  const enrichmentTasks = [
    { name: 'social', fn: fetchSocialData },
    { name: 'analytics', fn: fetchAnalytics },
    { name: 'recommendations', fn: fetchRecommendations }
  ];

  await Promise.all(
    enrichmentTasks.map(async (task) => {
      try {
        results.enrichments[task.name] = await task.fn(job.data.id);
      } catch (error) {
        console.warn(`Enrichment ${task.name} failed:`, error.message);
        results.enrichments[task.name] = null; // Graceful degradation
      }
    })
  );

  return results;
});</code></pre>

      <h2>Complete Error Handling Pattern</h2>

      <pre><code class="language-typescript">import { FlashQ, Worker } from 'flashq';
import CircuitBreaker from 'opossum';

const client = new FlashQ({ host: 'localhost', port: 6789 });

// Circuit breaker for external service
const breaker = new CircuitBreaker(callAPI, {
  timeout: 10000,
  errorThresholdPercentage: 50,
  resetTimeout: 30000
});

const worker = new Worker('resilient-queue', async (job) => {
  try {
    // 1. Validate input
    if (!job.data.userId) {
      await client.discard(job.id);
      return { error: 'Invalid data' };
    }

    // 2. Process with circuit breaker
    const result = await breaker.fire(job.data);

    // 3. Report progress for long jobs
    await client.progress(job.id, 100, 'Complete');

    return result;

  } catch (error) {
    // 4. Classify error
    if (isPermanentError(error)) {
      await client.discard(job.id);
      return { error: error.message };
    }

    if (breaker.opened) {
      console.log('Circuit open, will retry later');
    }

    throw error; // Retry for transient errors
  }
}, { concurrency: 10 });</code></pre>

      <div class="callout callout-success">
        <strong>Key Takeaways:</strong> Classify errors, use exponential backoff, implement circuit breakers, and always have a DLQ strategy for failed jobs.
      </div>

      <h2>Related Resources</h2>
      <ul>
        <li><a href="production-checklist.html">Production Checklist</a></li>
        <li><a href="debugging-queue-problems.html">Debugging Queue Problems</a></li>
        <li><a href="monitoring-ai-pipelines.html">Monitoring AI Pipelines</a></li>
      </ul>

      <div class="article-cta">
        <h3>Build Resilient Queues</h3>
        <p>Get started with flashQ and implement robust error handling.</p>
        <a href="../docs/#quickstart" class="btn btn-primary">Get Started â†’</a>
      </div>
    </div>
  </article>

  <footer>
    <div class="container">
      <a href="../" class="logo"><span>âš¡</span> flashQ</a>
      <div class="footer-links">
        <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
        <a href="https://npmjs.com/package/flashq" target="_blank">npm</a>
        <a href="../docs/">Docs</a>
        <a href="../blog/">Blog</a>
      </div>
      <div class="footer-copy">Â© 2026 flashQ. MIT License.</div>
    </div>
  </footer>

  <script src="../script.js"></script>
  <script>hljs.highlightAll();</script>
</body>
</html>
