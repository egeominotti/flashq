<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Debugging flashQ: Logs, Metrics, and Troubleshooting Guide - flashQ Blog</title>
  <meta name="description" content="Complete troubleshooting guide for flashQ job queues. Learn to diagnose stuck jobs, memory issues, connection problems, and performance bottlenecks with logs and metrics.">
  <meta name="keywords" content="flashq debugging, job queue troubleshooting, queue problems, stuck jobs, dlq debugging, flashq logs, job queue monitoring">
  <meta name="robots" content="index, follow">

  <meta property="og:title" content="Debugging flashQ: Logs, Metrics, and Troubleshooting Guide">
  <meta property="og:description" content="Complete troubleshooting guide for flashQ. Diagnose stuck jobs, memory issues, and performance bottlenecks.">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://flashq.dev/blog/debugging-queue-problems.html">
  <meta property="og:image" content="https://flashq.dev/og-image.png">
  <meta property="article:published_time" content="2026-01-19">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Debugging flashQ: Complete Troubleshooting Guide">
  <meta name="twitter:description" content="Diagnose stuck jobs, memory issues, and performance bottlenecks.">
  <meta name="twitter:image" content="https://flashq.dev/og-image.png">

  <link rel="canonical" href="https://flashq.dev/blog/debugging-queue-problems.html">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Debugging flashQ: Logs, Metrics, and Troubleshooting Guide",
    "description": "Complete troubleshooting guide for flashQ job queues with common problems and solutions.",
    "datePublished": "2026-01-19",
    "author": { "@type": "Organization", "name": "flashQ" },
    "publisher": { "@type": "Organization", "name": "flashQ", "url": "https://flashq.dev" }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://flashq.dev" },
      { "@type": "ListItem", "position": 2, "name": "Blog", "item": "https://flashq.dev/blog/" },
      { "@type": "ListItem", "position": 3, "name": "Debugging Queue Problems", "item": "https://flashq.dev/blog/debugging-queue-problems.html" }
    ]
  }
  </script>
</head>
<body>
  <nav>
    <div class="container wide">
      <a href="../" class="logo"><span>‚ö°</span> flashQ</a>
      <div class="nav-links">
        <a href="../#features">Features</a>
        <a href="../blog/" class="active">Blog</a>
        <a href="../docs/">Docs</a>
        <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
        <a href="../docs/#quickstart" class="btn btn-primary">Get Started</a>
      </div>
      <button class="mobile-menu-btn" aria-label="Menu"><span></span><span></span><span></span></button>
    </div>
  </nav>

  <div class="mobile-menu">
    <a href="../#features">Features</a>
    <a href="../blog/">Blog</a>
    <a href="../docs/">Docs</a>
    <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
    <a href="../docs/#quickstart" class="btn btn-primary">Get Started</a>
  </div>

  <header class="article-header header-devops">
    <div class="container">
      <span class="article-tag">Troubleshooting</span>
      <h1>Debugging flashQ: Logs, Metrics, and Troubleshooting Guide</h1>
      <div class="article-meta">
        <span>üìÖ January 19, 2026</span>
        <span>‚è±Ô∏è 12 min read</span>
      </div>
    </div>
  </header>

  <article class="article-content">
    <div class="container">
      <p>Something's wrong with your queue? This guide covers the most common problems and how to diagnose them using logs, metrics, and built-in tools.</p>

      <h2>Diagnostic Tools Overview</h2>

      <h3>1. HTTP API Endpoints</h3>
      <p>The HTTP API provides essential debugging endpoints:</p>

      <pre><code><span class="comment"># Health check - basic server status</span>
curl http://localhost:6790/health

<span class="comment"># Detailed statistics</span>
curl http://localhost:6790/stats

<span class="comment"># Prometheus metrics</span>
curl http://localhost:6790/metrics/prometheus

<span class="comment"># List all queues</span>
curl http://localhost:6790/queues

<span class="comment"># Get specific queue info</span>
curl http://localhost:6790/queue/my-queue/stats</code></pre>

      <h3>2. SDK Debugging Methods</h3>
      <pre><code><span class="keyword">import</span> { FlashQ } <span class="keyword">from</span> <span class="string">'flashq'</span>;

<span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({ host: <span class="string">'localhost'</span>, port: <span class="number">6789</span> });

<span class="comment">// Get server-wide statistics</span>
<span class="keyword">const</span> stats = <span class="keyword">await</span> client.<span class="function">stats</span>();
console.<span class="function">log</span>(<span class="string">'Server Stats:'</span>, JSON.<span class="function">stringify</span>(stats, <span class="keyword">null</span>, <span class="number">2</span>));

<span class="comment">// Get metrics with history</span>
<span class="keyword">const</span> metrics = <span class="keyword">await</span> client.<span class="function">metrics</span>();
console.<span class="function">log</span>(<span class="string">'Metrics:'</span>, metrics);

<span class="comment">// Get job counts by state</span>
<span class="keyword">const</span> counts = <span class="keyword">await</span> client.<span class="function">getJobCounts</span>(<span class="string">'my-queue'</span>);
console.<span class="function">log</span>(<span class="string">'Job Counts:'</span>, counts);
<span class="comment">// { waiting: 150, active: 10, completed: 5000, failed: 23, delayed: 50 }</span>

<span class="comment">// List jobs in a specific state</span>
<span class="keyword">const</span> failedJobs = <span class="keyword">await</span> client.<span class="function">getJobs</span>(<span class="string">'my-queue'</span>, <span class="string">'failed'</span>, <span class="number">100</span>);
failedJobs.<span class="function">forEach</span>(job => {
  console.<span class="function">log</span>(<span class="string">`Job </span>${job.id}<span class="string">: </span>${job.error}<span class="string">`</span>);
});

<span class="comment">// Get a specific job's details</span>
<span class="keyword">const</span> job = <span class="keyword">await</span> client.<span class="function">getJob</span>(jobId);
console.<span class="function">log</span>(<span class="string">'Job State:'</span>, job.state);
console.<span class="function">log</span>(<span class="string">'Job Data:'</span>, job.data);
console.<span class="function">log</span>(<span class="string">'Job Attempts:'</span>, job.attempts);</code></pre>

      <h3>3. Useful Debugging Script</h3>
      <pre><code><span class="comment">// debug-queue.ts - Save this for quick diagnostics</span>
<span class="keyword">import</span> { FlashQ } <span class="keyword">from</span> <span class="string">'flashq'</span>;

<span class="keyword">async function</span> <span class="function">diagnose</span>(queueName) {
  <span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({ host: <span class="string">'localhost'</span>, port: <span class="number">6789</span> });
  <span class="keyword">await</span> client.<span class="function">connect</span>();

  console.<span class="function">log</span>(<span class="string">'\n=== Queue Diagnostics ===\n'</span>);

  <span class="comment">// 1. Job counts</span>
  <span class="keyword">const</span> counts = <span class="keyword">await</span> client.<span class="function">getJobCounts</span>(queueName);
  console.<span class="function">log</span>(<span class="string">'üìä Job Counts:'</span>);
  console.<span class="function">log</span>(<span class="string">`   Waiting:   </span>${counts.waiting}<span class="string">`</span>);
  console.<span class="function">log</span>(<span class="string">`   Active:    </span>${counts.active}<span class="string">`</span>);
  console.<span class="function">log</span>(<span class="string">`   Completed: </span>${counts.completed}<span class="string">`</span>);
  console.<span class="function">log</span>(<span class="string">`   Failed:    </span>${counts.failed}<span class="string">`</span>);

  <span class="comment">// 2. Check for stuck jobs</span>
  <span class="keyword">const</span> activeJobs = <span class="keyword">await</span> client.<span class="function">getJobs</span>(queueName, <span class="string">'active'</span>, <span class="number">10</span>);
  console.<span class="function">log</span>(<span class="string">'\n‚è≥ Active Jobs:'</span>);
  activeJobs.<span class="function">forEach</span>(job => {
    <span class="keyword">const</span> age = Date.<span class="function">now</span>() - job.processedAt;
    <span class="keyword">const</span> status = age > <span class="number">60000</span> ? <span class="string">'‚ö†Ô∏è POSSIBLY STUCK'</span> : <span class="string">'‚úÖ OK'</span>;
    console.<span class="function">log</span>(<span class="string">`   Job </span>${job.id}<span class="string">: </span>${Math.<span class="function">round</span>(age/<span class="number">1000</span>)}<span class="string">s old </span>${status}<span class="string">`</span>);
  });

  <span class="comment">// 3. DLQ check</span>
  <span class="keyword">const</span> dlq = <span class="keyword">await</span> client.<span class="function">getDlq</span>(queueName, <span class="number">5</span>);
  console.<span class="function">log</span>(<span class="string">`\n‚ò†Ô∏è Dead Letter Queue: </span>${dlq.length}<span class="string"> jobs`</span>);

  <span class="keyword">await</span> client.<span class="function">close</span>();
}

<span class="function">diagnose</span>(process.argv[<span class="number">2</span>] || <span class="string">'default'</span>);</code></pre>

      <h2>Problem: Jobs Stuck in Processing</h2>

      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Jobs show as "active" but never complete</li>
        <li><code>getJobCounts</code> shows high <code>active</code> count that doesn't decrease</li>
        <li>Workers appear idle but jobs aren't being processed</li>
      </ul>

      <h3>Diagnosis Steps</h3>

      <pre><code><span class="comment">// 1. Check how long jobs have been active</span>
<span class="keyword">const</span> activeJobs = <span class="keyword">await</span> client.<span class="function">getJobs</span>(<span class="string">'my-queue'</span>, <span class="string">'active'</span>, <span class="number">100</span>);

activeJobs.<span class="function">forEach</span>(job => {
  <span class="keyword">const</span> activeTime = Date.<span class="function">now</span>() - job.processedAt;
  <span class="keyword">if</span> (activeTime > <span class="number">60000</span>) { <span class="comment">// More than 1 minute</span>
    console.<span class="function">log</span>(<span class="string">`‚ö†Ô∏è Job </span>${job.id}<span class="string"> stuck for </span>${Math.<span class="function">round</span>(activeTime/<span class="number">1000</span>)}<span class="string">s`</span>);
    console.<span class="function">log</span>(<span class="string">`   Worker: </span>${job.workerId}<span class="string">`</span>);
  }
});</code></pre>

      <h3>Common Causes & Solutions</h3>

      <h4>1. Worker Crashed Without ACK</h4>
      <pre><code><span class="comment">// Problem: Worker died before acknowledging</span>
<span class="comment">// Solution: flashQ auto-recovers after stall_timeout</span>

<span class="comment">// Set appropriate stall timeout when pushing jobs</span>
<span class="keyword">await</span> client.<span class="function">push</span>(<span class="string">'my-queue'</span>, data, {
  stall_timeout: <span class="number">30000</span>,  <span class="comment">// 30 seconds</span>
  timeout: <span class="number">60000</span>         <span class="comment">// 60 second processing timeout</span>
});

<span class="comment">// Jobs will automatically return to queue after timeout</span></code></pre>

      <h4>2. Infinite Loop in Processor</h4>
      <pre><code><span class="comment">// Problem: Processor never returns</span>
<span class="comment">// BAD</span>
<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'my-queue'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">while</span> (<span class="keyword">true</span>) {  <span class="comment">// Infinite loop!</span>
    <span class="keyword">await</span> <span class="function">doSomething</span>();
  }
});

<span class="comment">// GOOD - Always have exit conditions</span>
<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'my-queue'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">const</span> maxIterations = <span class="number">1000</span>;
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i < maxIterations; i++) {
    <span class="keyword">const</span> done = <span class="keyword">await</span> <span class="function">doSomething</span>();
    <span class="keyword">if</span> (done) <span class="keyword">break</span>;
  }
});</code></pre>

      <h4>3. Manual Recovery</h4>
      <pre><code><span class="comment">// Force-fail stuck jobs to return them to queue</span>
<span class="keyword">const</span> activeJobs = <span class="keyword">await</span> client.<span class="function">getJobs</span>(<span class="string">'my-queue'</span>, <span class="string">'active'</span>, <span class="number">100</span>);

<span class="keyword">for</span> (<span class="keyword">const</span> job <span class="keyword">of</span> activeJobs) {
  <span class="keyword">const</span> activeTime = Date.<span class="function">now</span>() - job.processedAt;
  <span class="keyword">if</span> (activeTime > <span class="number">300000</span>) { <span class="comment">// Stuck for 5+ minutes</span>
    console.<span class="function">log</span>(<span class="string">`Force-failing stuck job </span>${job.id}<span class="string">`</span>);
    <span class="keyword">await</span> client.<span class="function">fail</span>(job.id, <span class="string">'Manual recovery: job was stuck'</span>);
  }
}</code></pre>

      <h2>Problem: DLQ Filling Up</h2>

      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Many jobs in Dead Letter Queue</li>
        <li>Same errors repeating</li>
        <li>Jobs failing after max retries</li>
      </ul>

      <h3>Diagnosis</h3>

      <pre><code><span class="comment">// Analyze DLQ errors</span>
<span class="keyword">const</span> dlqJobs = <span class="keyword">await</span> client.<span class="function">getDlq</span>(<span class="string">'my-queue'</span>, <span class="number">100</span>);

<span class="comment">// Group by error type</span>
<span class="keyword">const</span> errorGroups = {};
dlqJobs.<span class="function">forEach</span>(job => {
  <span class="keyword">const</span> errorType = job.error?.<span class="function">split</span>(<span class="string">':'</span>)[<span class="number">0</span>] || <span class="string">'Unknown'</span>;
  errorGroups[errorType] = (errorGroups[errorType] || <span class="number">0</span>) + <span class="number">1</span>;
});

console.<span class="function">log</span>(<span class="string">'Error Distribution:'</span>);
Object.<span class="function">entries</span>(errorGroups)
  .<span class="function">sort</span>((a, b) => b[<span class="number">1</span>] - a[<span class="number">1</span>])
  .<span class="function">forEach</span>(([error, count]) => {
    console.<span class="function">log</span>(<span class="string">`  </span>${count}<span class="string">x </span>${error}<span class="string">`</span>);
  });</code></pre>

      <h3>Common Causes & Solutions</h3>

      <h4>1. External API Failures</h4>
      <pre><code><span class="comment">// Problem: Third-party API returns errors</span>
<span class="comment">// Solution: Add circuit breaker and better retry logic</span>

<span class="keyword">import</span> CircuitBreaker <span class="keyword">from</span> <span class="string">'opossum'</span>;

<span class="keyword">const</span> breaker = <span class="keyword">new</span> <span class="function">CircuitBreaker</span>(callExternalAPI, {
  timeout: <span class="number">10000</span>,
  errorThresholdPercentage: <span class="number">50</span>,
  resetTimeout: <span class="number">30000</span>
});

<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'api-calls'</span>, <span class="keyword">async</span> (job) => {
  <span class="keyword">try</span> {
    <span class="keyword">return</span> <span class="keyword">await</span> breaker.<span class="function">fire</span>(job.data);
  } <span class="keyword">catch</span> (error) {
    <span class="keyword">if</span> (breaker.opened) {
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="function">Error</span>(<span class="string">'Circuit breaker open, will retry'</span>);
    }
    <span class="keyword">throw</span> error;
  }
});</code></pre>

      <h4>2. Invalid Job Data</h4>
      <pre><code><span class="comment">// Problem: Jobs have bad data that will never succeed</span>
<span class="comment">// Solution: Validate before processing, discard invalid</span>

<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'process'</span>, <span class="keyword">async</span> (job) => {
  <span class="comment">// Validate first</span>
  <span class="keyword">if</span> (!job.data.userId || !job.data.action) {
    <span class="comment">// Don't retry invalid jobs - discard them</span>
    <span class="keyword">await</span> client.<span class="function">discard</span>(job.id);
    console.<span class="function">log</span>(<span class="string">`Discarded invalid job </span>${job.id}<span class="string">`</span>);
    <span class="keyword">return</span>;
  }

  <span class="keyword">await</span> <span class="function">processJob</span>(job.data);
});</code></pre>

      <h4>3. Retry DLQ Jobs After Fix</h4>
      <pre><code><span class="comment">// After fixing the root cause, retry DLQ jobs</span>
<span class="keyword">const</span> retried = <span class="keyword">await</span> client.<span class="function">retryDlq</span>(<span class="string">'my-queue'</span>);
console.<span class="function">log</span>(<span class="string">`Retried </span>${retried}<span class="string"> jobs from DLQ`</span>);

<span class="comment">// Or retry specific jobs</span>
<span class="keyword">const</span> dlqJobs = <span class="keyword">await</span> client.<span class="function">getDlq</span>(<span class="string">'my-queue'</span>, <span class="number">100</span>);
<span class="keyword">for</span> (<span class="keyword">const</span> job <span class="keyword">of</span> dlqJobs) {
  <span class="keyword">if</span> (job.error?.<span class="function">includes</span>(<span class="string">'API rate limit'</span>)) {
    <span class="keyword">await</span> client.<span class="function">retryDlq</span>(<span class="string">'my-queue'</span>, job.id);
  }
}</code></pre>

      <h2>Problem: Slow Processing</h2>

      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Queue backlog growing</li>
        <li>High latency between push and processing</li>
        <li>Throughput lower than expected</li>
      </ul>

      <h3>Diagnosis</h3>

      <pre><code><span class="comment">// Check queue depth and processing rate</span>
<span class="keyword">const</span> stats = <span class="keyword">await</span> client.<span class="function">stats</span>();
console.<span class="function">log</span>(<span class="string">'Queue depths:'</span>, stats.queues);

<span class="comment">// Monitor throughput over time</span>
<span class="keyword">const</span> metrics = <span class="keyword">await</span> client.<span class="function">metrics</span>();
console.<span class="function">log</span>(<span class="string">'Throughput history:'</span>, metrics.throughput);</code></pre>

      <h3>Common Causes & Solutions</h3>

      <h4>1. Low Worker Concurrency</h4>
      <pre><code><span class="comment">// Problem: Only processing one job at a time</span>
<span class="comment">// Solution: Increase concurrency</span>

<span class="comment">// Before</span>
<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'my-queue'</span>, processor);  <span class="comment">// Default: 1</span>

<span class="comment">// After - for I/O bound tasks</span>
<span class="keyword">const</span> worker = <span class="keyword">new</span> <span class="function">Worker</span>(<span class="string">'my-queue'</span>, processor, {
  concurrency: <span class="number">20</span>  <span class="comment">// Process 20 jobs concurrently</span>
});</code></pre>

      <h4>2. Rate Limiting Too Strict</h4>
      <pre><code><span class="comment">// Increase rate limit</span>
<span class="keyword">await</span> client.<span class="function">setRateLimit</span>(<span class="string">'my-queue'</span>, {
  max: <span class="number">100</span>,      <span class="comment">// 100 jobs</span>
  window: <span class="number">1000</span>   <span class="comment">// per second</span>
});

<span class="comment">// Or clear rate limit entirely for testing</span>
<span class="keyword">await</span> client.<span class="function">clearRateLimit</span>(<span class="string">'my-queue'</span>);</code></pre>

      <h4>3. Enable Binary Protocol</h4>
      <pre><code><span class="comment">// 40% faster serialization with MessagePack</span>
<span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({
  host: <span class="string">'localhost'</span>,
  port: <span class="number">6789</span>,
  useBinary: <span class="keyword">true</span>
});</code></pre>

      <h2>Problem: Connection Issues</h2>

      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Connection timeouts</li>
        <li>"Connection refused" errors</li>
        <li>Intermittent disconnects</li>
      </ul>

      <h3>Diagnosis</h3>

      <pre><code><span class="comment"># Check if server is running</span>
curl http://localhost:6790/health

<span class="comment"># Check port is open</span>
nc -zv localhost 6789

<span class="comment"># Check server logs</span>
docker logs flashq-server 2>&1 | tail -100</code></pre>

      <h3>Common Causes & Solutions</h3>

      <h4>1. Connection Pool Exhausted</h4>
      <pre><code><span class="comment">// Problem: Too many connections</span>
<span class="comment">// Solution: Reuse client instances</span>

<span class="comment">// BAD - Creates new connection per request</span>
app.<span class="function">post</span>(<span class="string">'/job'</span>, <span class="keyword">async</span> (req, res) => {
  <span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({ host: <span class="string">'localhost'</span> });
  <span class="keyword">await</span> client.<span class="function">connect</span>();
  <span class="keyword">await</span> client.<span class="function">push</span>(<span class="string">'queue'</span>, req.body);
  <span class="keyword">await</span> client.<span class="function">close</span>();  <span class="comment">// Connection churn!</span>
});

<span class="comment">// GOOD - Singleton client</span>
<span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({ host: <span class="string">'localhost'</span> });
<span class="keyword">await</span> client.<span class="function">connect</span>();

app.<span class="function">post</span>(<span class="string">'/job'</span>, <span class="keyword">async</span> (req, res) => {
  <span class="keyword">await</span> client.<span class="function">push</span>(<span class="string">'queue'</span>, req.body);  <span class="comment">// Reuses connection</span>
});</code></pre>

      <h4>2. Network Timeouts</h4>
      <pre><code><span class="comment">// Increase timeout for slow networks</span>
<span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">FlashQ</span>({
  host: <span class="string">'remote-server.com'</span>,
  port: <span class="number">6789</span>,
  timeout: <span class="number">30000</span>  <span class="comment">// 30 second timeout</span>
});</code></pre>

      <h2>Problem: Memory Issues</h2>

      <p><strong>Symptoms:</strong></p>
      <ul>
        <li>Server memory growing continuously</li>
        <li>OOM kills</li>
        <li>Slow response times</li>
      </ul>

      <h3>Diagnosis</h3>

      <pre><code><span class="comment"># Check server memory</span>
docker stats flashq-server

<span class="comment"># Check completed jobs count</span>
curl http://localhost:6790/stats | jq '.completed_jobs'</code></pre>

      <h3>Common Causes & Solutions</h3>

      <h4>1. Too Many Completed Jobs Stored</h4>
      <pre><code><span class="comment">// Problem: Keeping too many completed job results</span>
<span class="comment">// Solution: Set retention limits</span>

<span class="comment">// Per-job retention</span>
<span class="keyword">await</span> client.<span class="function">push</span>(<span class="string">'my-queue'</span>, data, {
  keepCompletedAge: <span class="number">3600000</span>,  <span class="comment">// Keep for 1 hour only</span>
  keepCompletedCount: <span class="number">100</span>     <span class="comment">// Or keep last 100</span>
});

<span class="comment">// Clean old jobs periodically</span>
<span class="keyword">await</span> client.<span class="function">clean</span>(<span class="string">'my-queue'</span>, <span class="number">3600000</span>, <span class="string">'completed'</span>, <span class="number">1000</span>);
<span class="comment">// Removes completed jobs older than 1 hour, max 1000</span></code></pre>

      <h2>Quick Reference: Debug Commands</h2>

      <table>
        <thead>
          <tr>
            <th>Problem</th>
            <th>Command</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Check server health</td>
            <td><code>curl localhost:6790/health</code></td>
          </tr>
          <tr>
            <td>View all queue stats</td>
            <td><code>curl localhost:6790/stats</code></td>
          </tr>
          <tr>
            <td>Check specific job</td>
            <td><code>client.getJob(jobId)</code></td>
          </tr>
          <tr>
            <td>View DLQ</td>
            <td><code>client.getDlq('queue', 100)</code></td>
          </tr>
          <tr>
            <td>Count jobs by state</td>
            <td><code>client.getJobCounts('queue')</code></td>
          </tr>
          <tr>
            <td>List stuck jobs</td>
            <td><code>client.getJobs('queue', 'active', 100)</code></td>
          </tr>
          <tr>
            <td>Check if paused</td>
            <td><code>client.isPaused('queue')</code></td>
          </tr>
          <tr>
            <td>Retry failed jobs</td>
            <td><code>client.retryDlq('queue')</code></td>
          </tr>
        </tbody>
      </table>

      <div class="callout callout-info">
        <strong>Still Stuck?</strong> Open an issue on <a href="https://github.com/egeominotti/flashq/issues" target="_blank">GitHub</a> with your diagnostic output and we'll help you troubleshoot.
      </div>

      <h2>Related Resources</h2>
      <ul>
        <li><a href="production-checklist.html">Production Checklist</a></li>
        <li><a href="error-handling-retry-patterns.html">Error Handling & Retry Patterns</a></li>
        <li><a href="monitoring-ai-pipelines.html">Monitoring AI Pipelines</a></li>
      </ul>

      <div class="article-cta">
        <h3>Need Help?</h3>
        <p>Check our documentation or open an issue on GitHub.</p>
        <a href="../docs/" class="btn btn-primary">Read the Docs ‚Üí</a>
      </div>
    </div>
  </article>

  <footer>
    <div class="container">
      <a href="../" class="logo"><span>‚ö°</span> flashQ</a>
      <div class="footer-links">
        <a href="https://github.com/egeominotti/flashq" target="_blank">GitHub</a>
        <a href="https://npmjs.com/package/flashq" target="_blank">npm</a>
        <a href="../docs/">Docs</a>
        <a href="../blog/">Blog</a>
      </div>
      <div class="footer-copy">¬© 2026 flashQ. MIT License.</div>
    </div>
  </footer>

  <script src="../script.js"></script>
</body>
</html>
